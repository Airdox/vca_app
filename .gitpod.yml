# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/introduction/learn-gitpod/gitpod-yaml)
# and commit this file to your remote git repository to share the goodness with others.

# Learn more from ready-to-use templates: https://www.gitpod.io/docs/introduction/getting-started/quickstart

image:
  file: .gitpod.Dockerfile # Verwendet das Dockerfile für Basisinstallationen

tasks:
  - name: Setup Java and Build
    init: |
      echo "--- Überprüfung und Finalisierung der Java-Umgebung ---"
      # Stelle sicher, dass Java 17 mit sdkman aktiv ist, da das Basis-Image oder frühere Konfigurationen Java 11 setzen könnten.
      sdk install java 17.0.10-tem || true
      sdk use java 17.0.10-tem
      echo "Java Version nach sdkman-Konfiguration (init-Phase):"
      java -version
      
      echo "ANDROID_HOME im Workspace: $ANDROID_HOME" # ANDROID_HOME sollte jetzt vom Dockerfile gesetzt sein.
      
      echo "--- Starte Gradle Build ---"
      ./gradlew build
      echo "--- Gradle Build beendet ---"
    command: |
      echo "Bereit für Entwicklung. Build sollte bereits gelaufen sein."