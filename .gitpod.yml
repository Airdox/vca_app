# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/introduction/learn-gitpod/gitpod-yaml)
# and commit this file to your remote git repository to share the goodness with others.

# Learn more from ready-to-use templates: https://www.gitpod.io/docs/introduction/getting-started/quickstart

tasks:
  - name: Setup Java and Build
    # Der 'init'-Schritt wird einmalig beim ersten Start des Workspaces ausgeführt.
    init: |
      # Installiere und aktiviere Java 17 mit sdkman.
      # Wir verwenden 'tem' (Temurin), eine gängige OpenJDK-Distribution.
      # Wenn 17.0.10 nicht verfügbar ist oder du eine andere möchtest,
      # kannst du 'sdk list java' im Terminal ausführen, um verfügbare Versionen zu sehen.
      sdk install java 17.0.10-tem || true
      sdk use java 17.0.10-tem
      echo "Java Version nach sdkman-Konfiguration:"
      java -version
      
      # Führe dann deinen Gradle-Build aus.
      ./gradlew build
    # Der 'command'-Schritt wird bei jedem Start des Workspaces ausgeführt,
    # nachdem 'init' abgeschlossen ist (oder wenn 'init' schon gelaufen ist).
    # Hier lassen wir ihn leer, da der Build schon im 'init'-Schritt läuft.
    # Du könntest hier auch z.B. './gradlew run' oder 'npm start' etc. reinlegen.
    command: |
      # Optional: Wenn du den Build nicht jedes Mal beim Start ausführen möchtest,
      # kannst du ihn aus 'init' entfernen und nur hier reinlegen.
      # Für den ersten Build und die Überprüfung lassen wir ihn im 'init' und lassen dies leer.
      echo "Bereit für Entwicklung. Build sollte bereits gelaufen sein."

